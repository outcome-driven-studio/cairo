# ================================
# CAIRO CDP ENVIRONMENT VARIABLES
# ================================
# Copy this file to .env and fill in your actual values
# Required variables are marked with (REQUIRED)

# ================================
# DATABASE CONFIGURATION (REQUIRED)
# ================================
# Use either POSTGRES_URL or DATABASE_URL (both are supported for compatibility)
# POSTGRES_URL takes precedence if both are set
POSTGRES_URL=postgresql://username:password@hostname:port/database_name
# DATABASE_URL=postgresql://username:password@hostname:port/database_name

# ================================
# SERVER CONFIGURATION
# ================================
PORT=8080
BASE_URL=http://localhost:8080
NODE_ENV=development
LOG_LEVEL=info

# Optional: namespace prefix for AI query / table names (default: playmaker)
# DEFAULT_NAMESPACE=playmaker

# Security (Optional - for future features)
# JWT_SECRET=your_random_secret_here
# WEBHOOK_SECRET=your_webhook_secret_here

# ================================
# EXTERNAL API KEYS (REQUIRED FOR SYNC)
# ================================
LEMLIST_API_KEY=your_lemlist_api_key_here
SMARTLEAD_API_KEY=your_smartlead_api_key_here
ATTIO_API_KEY=your_attio_api_key_here

# ================================
# ENRICHMENT SERVICE API KEYS
# ================================
APOLLO_API_KEY=your_apollo_api_key_here
HUNTER_API_KEY=your_hunter_api_key_here
MIXPANEL_PROJECT_TOKEN=your_mixpanel_token_here
# Optional: for Mixpanel destination auth (admin/export APIs)
# MIXPANEL_API_SECRET=your_mixpanel_api_secret_here

# ================================
# AI ENRICHMENT API KEYS (OPTIONAL)
# ================================
# Used by enrichment service and AI query; Gemini is primary in code
GEMINI_API_KEY=your_gemini_api_key_here
# GEMINI_MODEL_PRO=gemini-1.5-pro
# GEMINI_MODEL_FLASH=gemini-1.5-flash
# Enable AI-enhanced lead scoring (requires GEMINI_API_KEY)
# ENABLE_AI_LEAD_SCORING=true

OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4-turbo-preview
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-3-sonnet-20240229
PERPLEXITY_API_KEY=your_perplexity_api_key_here
PERPLEXITY_MODEL=llama-3.1-sonar-small-128k-online

# ================================
# ENRICHMENT CONFIGURATION
# ================================
ENRICHMENT_STRATEGY=cost_optimized
PREFERRED_AI_PROVIDER=openai
AI_MIN_CONFIDENCE=60

# ================================
# BACKGROUND JOB CONFIGURATION
# ================================
# OPTION 1: Modern Periodic Sync (RECOMMENDED)
USE_PERIODIC_SYNC=true
SYNC_INTERVAL_HOURS=4
RUN_SYNC_ON_START=false

# OPTION 2: Legacy Cron Jobs (DEPRECATED - will be removed in future version)
# WARNING: Do not enable both USE_PERIODIC_SYNC and ENABLE_CRON_JOBS simultaneously!
ENABLE_CRON_JOBS=false
DISABLE_CRON_JOBS=false

# ================================
# SYNC SOURCE TOGGLES
# ================================
SYNC_FROM_ATTIO=true
SYNC_FROM_LEMLIST=true
SYNC_FROM_SMARTLEAD=true
CALCULATE_SCORES=true
SYNC_SCORES_TO_ATTIO=true

# ================================
# ICP SCORING CONFIGURATION
# ================================
ENABLE_WEEKLY_ICP_SCORING=true
ICP_SCORING_DAY=0
ICP_SCORING_HOUR=2
MIN_BEHAVIOR_SCORE_FOR_ATTIO=1

# ================================
# POLLING & PROCESSING
# ================================
POLL_INTERVAL_MINUTES=5

# Mixpanel in periodic sync pipeline (default: true)
PERIODIC_SYNC_MIXPANEL_ENABLED=true

# ================================
# NOTIFICATIONS (SLACK & DISCORD)
# ================================
# Optional. You can also add and configure Slack/Discord via the Event Notifications UI
# (Connections + Event Notifications). Env vars here register default destinations at startup.
# Slack
SLACK_WEBHOOK_URL=your_slack_webhook_url_here
# SLACK_DEFAULT_CHANNEL=#events
# SLACK_ALERT_EVENTS=Sign Up,Purchase,Payment Completed
# SLACK_PAYMENT_THRESHOLD=100
# SLACK_MAX_ALERTS_PER_MINUTE=10
DISABLE_SLACK_ALERTS=false

# Discord
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/...
# DISCORD_USERNAME=Cairo CDP
# DISCORD_AVATAR_URL=
# DISCORD_ALERT_EVENTS=Sign Up,Purchase,Payment Completed
# DISCORD_PAYMENT_THRESHOLD=100
# DISCORD_MAX_ALERTS_PER_MINUTE=10
# DISCORD_DEFAULT_CHANNEL=  (Discord webhooks target channel by URL; this is for display only)

# Resend (email + contacts). Optional; you can also add Resend via Connections > Add Destination.
# RESEND_API_KEY=re_xxxxxxxx
# RESEND_FROM_EMAIL=onboarding@resend.dev
# RESEND_AUDIENCE_ID=   (optional)
# RESEND_ALERT_EVENTS=Sign Up,Purchase

# ================================
# NOTION BRIDGE (POST /api/bridge/notion)
# ================================
# Use in Notion automation "Send webhook" to post to Discord. Customize how the message looks:
# NOTION_BRIDGE_WEBHOOK_URL=   (override; if unset, uses DISCORD_WEBHOOK_URL)
# NOTION_BRIDGE_USERNAME=Notion
# NOTION_BRIDGE_AVATAR_URL=
# NOTION_BRIDGE_FOOTER=Cairo Â· Notion
# NOTION_BRIDGE_TITLE_KEYS=Task name,Name,Title,title,name
# NOTION_BRIDGE_DEFAULT_COLOR=5B4FFF
# NOTION_BRIDGE_INCLUDE_LINK=true

# ================================
# MONITORING & ERROR TRACKING
# ================================
SENTRY_DSN=your_sentry_dsn_here
SENTRY_RELEASE=cairo@1.0.0
# SENTRY_ENVIRONMENT=production
# SENTRY_LOG_WARNINGS=false
# SENTRY_TRACK_SYNC=false

# ================================
# DEPLOYMENT PLATFORM (AUTO-SET)
# ================================
# Typically set by platform; used for Sentry serverName and tags
# RAILWAY_SERVICE_NAME=cairo
# RAILWAY_ENVIRONMENT=production
# RAILWAY_PROJECT_ID=
# RENDER_SERVICE_NAME=cairo
# HEROKU_APP_NAME=cairo

# ================================
# GCP / CLOUD RUN (OPTIONAL)
# ================================
# K_SERVICE is set by Cloud Run. For Cloud SQL auth:
# GOOGLE_CLOUD_PROJECT=your-project
# GCP_PROJECT=your-project
# INSTANCE_CONNECTION_NAME=project:region:instance
# DB_USER=cairo_app
# DB_PASSWORD=secret
# DB_NAME=cairo_db

# ================================
# PRODUCTION DEPLOYMENT EXAMPLE
# ================================
# NODE_ENV=production
# USE_PERIODIC_SYNC=true
# SYNC_INTERVAL_HOURS=4
# RUN_SYNC_ON_START=true

# ================================
# REQUIRED VARIABLES CHECKLIST
# ================================
# Minimum to run:
#   POSTGRES_URL or DATABASE_URL
# For sync (as needed):
#   LEMLIST_API_KEY, SMARTLEAD_API_KEY, ATTIO_API_KEY
# For Event Notifications: use the UI (Event Notifications page) or set SLACK_WEBHOOK_URL / DISCORD_WEBHOOK_URL here
